<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dome Tents - Wilderness Essentials UK</title>
  <link rel="stylesheet" href="../style.css">
</head>
<body>
  <header class="site-header">
    <a id="homeLogoLink" href="../index.html">
      <img src="../logo.jpg" alt="Wilderness Essentials UK" class="logo-img" id="logo">
    </a>
    <div id="siteIntro">
      Wilderness Essentials UK
      <span>Your Definitive Guide to the UK's Hottest Selling Camping Gear.</span>
    </div>
    <nav class="megabar" aria-label="Main Navigation">
      <ul id="megabarMenu" class="megabar-menu"></ul>
    </nav>
  </header>

  <main id="mainContent">
    <div class="category-intro">
      <h1>Dome Tents</h1>
      <p>
        Discover our selection of dome tents, designed for quick setup and superior stability.
        Perfect for camping adventures in all weather conditions. Browse top-selling models and find the ideal shelter for your next outdoor trip.
      </p>
    </div>
    <div id="productsGrid"></div>
  </main>

  <footer id="siteFooter">
    &copy; 2025 Wilderness Essentials UK &bull; All Rights Reserved.
  </footer>

  <script src="../script.js"></script>
  <script>
    // --- Card rendering function ---
    function makeProductCard(p) {
      const card = document.createElement('div');
      card.className = 'product-card';
      if (p.image_url) {
        const img = document.createElement('img');
        img.className = 'product-image';
        img.src = p.image_url;
        img.alt = p.name;
        card.appendChild(img);
      }
      const details = document.createElement('div');
      details.className = 'product-details';
      const title = document.createElement('div');
      title.className = 'product-title';
      title.textContent = p.name;
      details.appendChild(title);
      const desc = document.createElement('div');
      desc.className = 'product-desc';
      desc.textContent = (p.description || "").split('\n')[0];
      details.appendChild(desc);
      if (p.amazon_link) {
        const btn = document.createElement('a');
        btn.className = 'product-link';
        btn.href = p.amazon_link;
        btn.target = "_blank";
        btn.rel = "noopener";
        btn.textContent = "More Details";
        details.appendChild(btn);
      }
      card.appendChild(details);
      return card;
    }

    document.addEventListener('DOMContentLoaded', async function () {
      if (typeof fetchProductsFromSheet === 'function') {
        await fetchProductsFromSheet();
      }
      if (typeof buildWPStyleMegaMenu === 'function') {
        buildWPStyleMegaMenu();
      }
      // Only show products for this subcategory
      const grid = document.getElementById('productsGrid');
      const catPath = "Tents > Dome Tents";
      grid.innerHTML = '';
      let filtered = [];
      if (typeof allProducts !== "undefined" && allProducts.length) {
        filtered = allProducts.filter(p => p.category === catPath);
      }
      if (!filtered.length) {
        grid.innerHTML = `<div style="grid-column: 1 / -1; text-align: center; color: #888;">No products found for this category.</div>`;
      } else {
        filtered.forEach(p => {
          grid.appendChild(makeProductCard(p));
        });
      }
    });
  </script>
</body>
</html>
